<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chat with Ricky's AI | Ricky Christian</title>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --navy: #0a1628;
      --navy-mid: #122040;
      --accent: #c8a97e;
      --accent-light: #e8d5b5;
      --white: #f8f5f0;
      --gray: #8a8f9a;
      --border: rgba(200,169,126,0.2);
      --serif: 'DM Serif Display', Georgia, serif;
      --sans: 'DM Sans', sans-serif;
    }

    html, body {
      height: 100%;
      background: var(--navy);
      color: var(--white);
      font-family: var(--sans);
      overflow: hidden;
    }

    /* ‚îÄ‚îÄ‚îÄ NAV ‚îÄ‚îÄ‚îÄ */
    nav {
      position: fixed; top: 0; left: 0; right: 0;
      z-index: 100;
      display: flex; justify-content: space-between; align-items: center;
      padding: 1rem 5%;
      background: rgba(10,22,40,0.95);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border);
    }
    .nav-logo {
      display: flex; align-items: center;
      text-decoration: none;
    }
    .nav-logo svg { width: 42px; height: 34px; }
    .nav-back {
      display: flex; align-items: center; gap: 0.5rem;
      color: rgba(248,245,240,0.6);
      text-decoration: none;
      font-size: 0.82rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-weight: 500;
      transition: color 0.2s;
    }
    .nav-back:hover { color: var(--accent); }

    /* ‚îÄ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ‚îÄ */
    .chat-wrapper {
      display: flex;
      flex-direction: column;
      height: 100vh;
      padding-top: 64px;
    }

    /* ‚îÄ‚îÄ‚îÄ CHAT HEADER ‚îÄ‚îÄ‚îÄ */
    .chat-header {
      padding: 1.5rem 5%;
      border-bottom: 1px solid var(--border);
      background: rgba(18,32,64,0.4);
      display: flex;
      align-items: center;
      gap: 1rem;
      flex-shrink: 0;
    }
    .ai-avatar {
      width: 44px; height: 44px;
      background: rgba(200,169,126,0.12);
      border: 1px solid var(--border);
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.2rem;
      flex-shrink: 0;
    }
    .ai-info h2 {
      font-family: var(--serif);
      font-size: 1.1rem;
      color: var(--white);
      margin-bottom: 0.1rem;
    }
    .ai-status {
      display: flex; align-items: center; gap: 0.4rem;
      font-size: 0.75rem; color: var(--gray);
    }
    .status-dot {
      width: 7px; height: 7px;
      background: #4caf84;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }

    /* ‚îÄ‚îÄ‚îÄ SUGGESTED QUESTIONS ‚îÄ‚îÄ‚îÄ */
    .suggestions {
      padding: 1rem 5%;
      display: flex;
      gap: 0.6rem;
      flex-wrap: wrap;
      border-bottom: 1px solid var(--border);
      background: rgba(10,22,40,0.5);
      flex-shrink: 0;
    }
    .suggestion-btn {
      padding: 0.4rem 0.9rem;
      background: rgba(200,169,126,0.08);
      border: 1px solid var(--border);
      border-radius: 20px;
      color: rgba(248,245,240,0.7);
      font-family: var(--sans);
      font-size: 0.78rem;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }
    .suggestion-btn:hover {
      background: rgba(200,169,126,0.18);
      color: var(--white);
      border-color: var(--accent);
    }

    /* ‚îÄ‚îÄ‚îÄ MESSAGES ‚îÄ‚îÄ‚îÄ */
    .messages {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem 5%;
      display: flex;
      flex-direction: column;
      gap: 1.25rem;
    }
    .messages::-webkit-scrollbar { width: 4px; }
    .messages::-webkit-scrollbar-track { background: transparent; }
    .messages::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

    .message {
      display: flex;
      gap: 0.75rem;
      max-width: 780px;
      animation: msgIn 0.3s ease;
    }
    @keyframes msgIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .message.user { align-self: flex-end; flex-direction: row-reverse; }
    .message.user .msg-bubble {
      background: rgba(200,169,126,0.15);
      border: 1px solid rgba(200,169,126,0.3);
      border-radius: 18px 18px 4px 18px;
    }
    .message.ai { align-self: flex-start; }
    .message.ai .msg-bubble {
      background: rgba(18,32,64,0.8);
      border: 1px solid var(--border);
      border-radius: 18px 18px 18px 4px;
    }
    .msg-avatar {
      width: 32px; height: 32px;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 0.9rem;
      flex-shrink: 0;
      margin-top: 2px;
    }
    .message.ai .msg-avatar {
      background: rgba(200,169,126,0.12);
      border: 1px solid var(--border);
    }
    .message.user .msg-avatar {
      background: rgba(200,169,126,0.2);
      border: 1px solid rgba(200,169,126,0.3);
    }
    .msg-bubble {
      padding: 0.85rem 1.1rem;
      font-size: 0.92rem;
      line-height: 1.65;
      color: rgba(248,245,240,0.9);
    }
    .msg-bubble strong { color: var(--accent); }
    .msg-bubble ul { padding-left: 1.2rem; margin-top: 0.4rem; }
    .msg-bubble li { margin-bottom: 0.3rem; }

    /* Typing indicator */
    .typing .msg-bubble {
      display: flex; align-items: center; gap: 4px;
      padding: 1rem 1.1rem;
    }
    .typing-dot {
      width: 7px; height: 7px;
      background: var(--accent);
      border-radius: 50%;
      animation: typingBounce 1.2s infinite;
    }
    .typing-dot:nth-child(2) { animation-delay: 0.2s; }
    .typing-dot:nth-child(3) { animation-delay: 0.4s; }
    @keyframes typingBounce {
      0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
      30% { transform: translateY(-6px); opacity: 1; }
    }

    /* ‚îÄ‚îÄ‚îÄ INPUT ‚îÄ‚îÄ‚îÄ */
    .input-area {
      padding: 1rem 5%;
      border-top: 1px solid var(--border);
      background: rgba(10,22,40,0.8);
      backdrop-filter: blur(12px);
      flex-shrink: 0;
    }
    .input-row {
      display: flex;
      gap: 0.75rem;
      align-items: flex-end;
      max-width: 780px;
      margin: 0 auto;
    }
    .input-row textarea {
      flex: 1;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 0.85rem 1rem;
      color: var(--white);
      font-family: var(--sans);
      font-size: 0.92rem;
      resize: none;
      outline: none;
      max-height: 120px;
      line-height: 1.5;
      transition: border-color 0.2s;
    }
    .input-row textarea:focus { border-color: var(--accent); }
    .input-row textarea::placeholder { color: rgba(248,245,240,0.3); }
    .send-btn {
      width: 44px; height: 44px;
      background: var(--accent);
      border: none;
      border-radius: 12px;
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      transition: all 0.2s;
      flex-shrink: 0;
    }
    .send-btn:hover { background: var(--accent-light); transform: scale(1.05); }
    .send-btn:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }
    .send-btn svg { width: 18px; height: 18px; fill: var(--navy); }

    .input-hint {
      text-align: center;
      font-size: 0.72rem;
      color: var(--gray);
      margin-top: 0.5rem;
    }

    /* ‚îÄ‚îÄ‚îÄ WELCOME ‚îÄ‚îÄ‚îÄ */
    .welcome {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 2rem;
      gap: 0.75rem;
      flex: 1;
    }
    .welcome-icon { font-size: 2.5rem; margin-bottom: 0.5rem; }
    .welcome h3 {
      font-family: var(--serif);
      font-size: 1.6rem;
      color: var(--white);
    }
    .welcome h3 em { font-style: italic; color: var(--accent); }
    .welcome p { color: var(--gray); font-size: 0.9rem; max-width: 380px; line-height: 1.6; }
  </style>
</head>
<body>

  <!-- NAV -->
  <nav>
    <a href="index.html" class="nav-logo">
      <svg viewBox="0 0 56 44" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="2" width="52" height="34" rx="4" fill="rgba(200,169,126,0.07)" stroke="#c8a97e" stroke-width="1.5"/>
        <rect x="6" y="6" width="44" height="26" rx="2" fill="rgba(200,169,126,0.05)" stroke="rgba(200,169,126,0.25)" stroke-width="0.75"/>
        <text x="13" y="25" font-family="Georgia, serif" font-size="14" font-weight="bold" fill="#c8a97e" letter-spacing="1">R</text>
        <text x="28" y="25" font-family="Georgia, serif" font-size="14" font-weight="bold" fill="#f8f5f0" letter-spacing="1">C</text>
        <rect x="40" y="17" width="2" height="9" rx="1" fill="#c8a97e" opacity="0.8">
          <animate attributeName="opacity" values="0.8;0;0.8" dur="1.1s" repeatCount="indefinite"/>
        </rect>
        <rect x="25" y="36" width="6" height="4" rx="1" fill="none" stroke="#c8a97e" stroke-width="1.5"/>
        <rect x="18" y="40" width="20" height="2.5" rx="1.5" fill="none" stroke="#c8a97e" stroke-width="1.5"/>
      </svg>
    </a>
    <a href="index.html" class="nav-back">‚Üê Back to Portfolio</a>
  </nav>

  <!-- CHAT WRAPPER -->
  <div class="chat-wrapper">

    <!-- HEADER -->
    <div class="chat-header">
      <div class="ai-avatar">ü§ñ</div>
      <div class="ai-info">
        <h2>Ricky's AI Assistant</h2>
        <div class="ai-status">
          <span class="status-dot"></span>
          Online ‚Äî Ask me anything about Ricky
        </div>
      </div>
    </div>

    <!-- SUGGESTED QUESTIONS -->
    <div class="suggestions">
      <button class="suggestion-btn" onclick="askSuggestion(this)">What are Ricky's skills?</button>
      <button class="suggestion-btn" onclick="askSuggestion(this)">Where has Ricky worked?</button>
      <button class="suggestion-btn" onclick="askSuggestion(this)">Tell me about his projects</button>
      <button class="suggestion-btn" onclick="askSuggestion(this)">What is his education?</button>
      <button class="suggestion-btn" onclick="askSuggestion(this)">Is Ricky open to work?</button>
      <button class="suggestion-btn" onclick="askSuggestion(this)">What cloud platforms does he know?</button>
    </div>

    <!-- MESSAGES -->
    <div class="messages" id="messages">
      <div class="welcome" id="welcome">
        <div class="welcome-icon">üí¨</div>
        <h3>Hi, I'm Ricky's <em>AI Assistant</em></h3>
        <p>Ask me anything about Ricky's skills, experience, projects, or background. I'm here to help!</p>
      </div>
    </div>

    <!-- INPUT -->
    <div class="input-area">
      <div class="input-row">
        <textarea id="userInput" rows="1" placeholder="Ask me about Ricky..." onkeydown="handleKey(event)" oninput="autoResize(this)"></textarea>
        <button class="send-btn" id="sendBtn" onclick="sendMessage()">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M2 21l21-9L2 3v7l15 2-15 2v7z"/>
          </svg>
        </button>
      </div>
      <div class="input-hint">Powered by Gemini AI ¬∑ Answers based on Ricky's resume</div>
    </div>

  </div>

  <script>
    const API_KEY = 'AIzaSyBE1dRHanOfBkNrvspdBjk2IgMuwgeNl_A';
    const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;

    const SYSTEM_PROMPT = `You are an AI assistant representing Ricky Christian, a software developer. Your job is to answer questions about Ricky in a professional, friendly, and concise way. Only answer questions about Ricky ‚Äî if asked anything unrelated, politely redirect the conversation back to Ricky's professional profile.

Here is Ricky's full background:

NAME: Ricky Christian
LOCATION: Los Angeles Metropolitan Area, CA
EMAIL: christianrickycali@gmail.com
LINKEDIN: linkedin.com/in/rickychristian

SUMMARY:
Results-driven Software Developer with 3 years of experience in full-stack development specializing in Java, JavaScript, and SQL. Skilled in building and supporting enterprise insurance systems, including greenfield projects and critical production environments. Experienced in designing dynamic forms using Adobe Designer with Java/JavaScript integration. Proficient in system monitoring with Splunk and Datadog. Holds a Master's degree in Computer Science from California State University, Sacramento.

SKILLS:
- Languages: Java, JavaScript, TypeScript, Python, C#, SQL
- Backend: Spring Boot, Spring MVC, Spring Security, Spring Data JPA, Node.js, Express.js, .NET
- Frontend: React.js, React Native, Redux, Angular, JavaFX
- Databases: PostgreSQL, MySQL, SQL Server, MongoDB, DynamoDB, Firebase, Redis
- Cloud/AWS: EC2, S3, Lambda, RDS, Elastic Beanstalk, Step Functions, API Gateway, VPC, SES, SNS, CloudWatch, Cognito, CloudFormation
- Cloud/GCP: Kubernetes, Terraform
- DevOps: Docker, Git, GitHub, CI/CD, Infrastructure as Code
- Monitoring: Splunk, Datadog, AWS CloudWatch
- APIs: RESTful APIs, SOAP, Microservices, Event-driven Architecture
- Testing: Jest, Playwright, Unit Testing, Integration Testing
- Enterprise: Adobe Designer, AEM Forms, Adobe Experience Manager

WORK EXPERIENCE:

1. Farmers Mutual Hail Insurance ‚Äî Software Developer (Sep 2023 ‚Äì Present, Remote)
- Developed Java Spring Boot microservices for crop insurance claims workflows for 50,000+ policyholders
- Built RESTful APIs reducing agent support requests by 40%
- Created RMA-compliant PDF forms with Adobe Designer
- Reduced claim reporting execution time from minutes to seconds with SQL optimization
- Achieved 100% federal audit compliance with USDA RMA regulations
- Built Splunk/Datadog monitoring reducing MTTR by 60%
- Refactored legacy modules cutting deployment times by 50%

2. CalPERS at Sac State ‚Äî Student Software Development Assistant (May 2020 ‚Äì Aug 2020)
- Developed pension management applications using Java Spring Boot and Angular
- Improved system availability by 20% via AWS deployments
- Reduced processing time by 25% through automation with Redis queues

3. California State University, Sacramento ‚Äî Teaching Assistant (Jan 2021 ‚Äì Jan 2023)
- Taught Software Engineering covering SDLC, design patterns, data structures
- Supported 100+ students with Java, data structures, and version control

PROJECTS:
1. Task Master ‚Äî Daily task management system using AWS EC2, RDS (PostgreSQL), Lambda, CloudFormation, VPC, Secrets Manager, SNS
2. SentinelOps ‚Äî Production incident management platform with React, NestJS, PostgreSQL, Redis, RabbitMQ, Kubernetes, Prometheus, Grafana, OAuth 2.0, WebAuthn MFA, RBAC

EDUCATION:
- M.S. Computer Science ‚Äî California State University, Sacramento (Jan 2023)
- B.S. Computer Science & Engineering ‚Äî Gujarat Technological University, India (June 2018)

AVAILABILITY: Ricky is actively looking for new software engineering opportunities.

When answering, be concise, warm, and professional. Use bullet points when listing multiple items. Speak about Ricky in third person.`;

    const history = [];

    function autoResize(el) {
      el.style.height = 'auto';
      el.style.height = Math.min(el.scrollHeight, 120) + 'px';
    }

    function handleKey(e) {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    }

    function askSuggestion(btn) {
      document.getElementById('userInput').value = btn.textContent;
      sendMessage();
    }

    function removeWelcome() {
      const welcome = document.getElementById('welcome');
      if (welcome) welcome.remove();
    }

    function addMessage(role, text) {
      removeWelcome();
      const container = document.getElementById('messages');
      const div = document.createElement('div');
      div.className = `message ${role}`;

      const avatar = document.createElement('div');
      avatar.className = 'msg-avatar';
      avatar.textContent = role === 'ai' ? 'ü§ñ' : 'üë§';

      const bubble = document.createElement('div');
      bubble.className = 'msg-bubble';
      bubble.innerHTML = formatText(text);

      div.appendChild(avatar);
      div.appendChild(bubble);
      container.appendChild(div);
      container.scrollTop = container.scrollHeight;
      return div;
    }

    function addTyping() {
      removeWelcome();
      const container = document.getElementById('messages');
      const div = document.createElement('div');
      div.className = 'message ai typing';
      div.id = 'typing';

      const avatar = document.createElement('div');
      avatar.className = 'msg-avatar';
      avatar.textContent = 'ü§ñ';

      const bubble = document.createElement('div');
      bubble.className = 'msg-bubble';
      bubble.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';

      div.appendChild(avatar);
      div.appendChild(bubble);
      container.appendChild(div);
      container.scrollTop = container.scrollHeight;
    }

    function removeTyping() {
      const t = document.getElementById('typing');
      if (t) t.remove();
    }

    function formatText(text) {
      return text
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
        .replace(/\*(.*?)\*/g, '<em>$1</em>')
        .replace(/^- (.+)/gm, '<li>$1</li>')
        .replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>')
        .replace(/\n\n/g, '<br><br>')
        .replace(/\n/g, '<br>');
    }

    async function sendMessage() {
      const input = document.getElementById('userInput');
      const sendBtn = document.getElementById('sendBtn');
      const text = input.value.trim();
      if (!text) return;

      input.value = '';
      input.style.height = 'auto';
      sendBtn.disabled = true;

      addMessage('user', text);
      addTyping();

      try {
        // Build full conversation with system context prepended to first message
        const fullPrompt = SYSTEM_PROMPT + '\n\nUser question: ' + text;

        const response = await fetch(API_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            contents: [
              {
                parts: [{ text: fullPrompt }]
              }
            ],
            generationConfig: {
              maxOutputTokens: 600,
              temperature: 0.7
            }
          })
        });

        const data = await response.json();
        console.log('Gemini response:', data);

        if (data.error) {
          console.error('API Error:', data.error);
          removeTyping();
          addMessage('ai', '‚ö†Ô∏è API Error: ' + data.error.message);
          sendBtn.disabled = false;
          return;
        }

        const reply = data.candidates?.[0]?.content?.parts?.[0]?.text || "Sorry, I couldn't get a response. Please try again.";

        removeTyping();
        addMessage('ai', reply);

      } catch (err) {
        console.error('Fetch error:', err);
        removeTyping();
        addMessage('ai', '‚ö†Ô∏è Connection error: ' + err.message);
      }

      sendBtn.disabled = false;
      input.focus();
    }

    // Welcome message on load
    window.addEventListener('load', () => {
      document.getElementById('userInput').focus();
    });
  </script>
</body>
</html>
